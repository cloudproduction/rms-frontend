{"ast":null,"code":"var _jsxFileName = \"/home/julfikar/Desktop/rms-project/rms-frontend/src/components/pages/Login.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom'; // import axios from 'axios';\n\nimport axiosInstance from '../../intercept.js';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.submitForm = e => {\n      e.preventDefault();\n      const user_info = {\n        username: this.state.username,\n        password: this.state.password\n      }; // if(user_info){\n      //     localStorage.setItem(\"token\",\"julfikar\")\n      //     this.setState({\n      //             loggedIn:true\n      //         })\n      // }\n      // axios.post('http://workapis.pythonanywhere.com/api/login/', user_info)\n      // .then(res => {\n      //     localStorage.setItem(\"token\", JSON.stringify(res))\n      //     this.setState({\n      //                     loggedIn:true\n      //                 })\n      //             }\n      // );\n      // axios.post('http://workapis.pythonanywhere.com/api/login/', user_info)\n      // .then(resp => {\n      //     console.log('data',resp);\n      //     if(resp.length > 0){\n      //         localStorage.setItem(\"token\", JSON.stringify(resp))\n      //         this.setState({\n      //                 loggedIn:true\n      //         })\n      //     }else{\n      //         alert('Your username and password not match')\n      //     }\n      // } \n      //     // window.localStorage.setItem('token', res.data.data.token)\n      // );\n\n      axiosInstance.post('/login/', user_info).then(response => {\n        if (response.data != null) {\n          console.log('76', response.data);\n          console.log('78', response.data);\n          localStorage.setItem(\"token\", JSON.stringify(response.data));\n          this.setState({\n            loggedIn: true\n          });\n        } else {\n          alert(\"Empty data found\");\n        }\n      }).catch(err => {\n        // what now?\n        console.log(err);\n        this.setState({\n          message: err.response.data.non_field_errors\n        });\n      });\n    };\n\n    const token = localStorage.getItem(\"token\");\n    let loggedIn = true;\n\n    if (token === null) {\n      loggedIn = false;\n    }\n\n    this.state = {\n      username: '',\n      password: '',\n      message: '',\n      loggedIn\n    };\n    this.onInputChange = this.onInputChange.bind(this);\n    this.submitForm = this.submitForm.bind(this);\n  }\n\n  onInputChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n    console.log(this.state);\n  }\n\n  render() {\n    if (this.state.loggedIn) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/dashboard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 20\n        }\n      });\n    }\n\n    let error = '';\n\n    if (this.state.message) {\n      error = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"alert alert-danger\",\n        style: {\n          fontsize: '14px'\n        },\n        role: \"alert\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }\n      }, this.state.message);\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-bg-color\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-card-card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo-login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 33\n      }\n    }, \"RMS\"), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 33\n      }\n    }, \"User Login:\"), error, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"text-center\",\n      onSubmit: this.submitForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"materialLoginFormEmail\",\n      name: \"username\",\n      className: \"form-control\",\n      placeholder: \" Enter your Username\",\n      value: this.state.username,\n      onChange: this.onInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      id: \"materialLoginFormPassword\",\n      name: \"password\",\n      className: \"form-control\",\n      placeholder: \"Enter Your Password\",\n      value: this.state.password,\n      onChange: this.onInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"\",\n      className: \"text-right float-right forgot\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 41\n      }\n    }, \"Forgot password?\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"checkbox checkbox-base\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: 1,\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 45\n      }\n    }, \"Remember Me\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"white-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline  btn-block my-4 \",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 41\n      }\n    }, \"SIGN IN\")), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"newuser\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 37\n      }\n    }, \"Not a Member?\", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, \"Register\"))))))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/julfikar/Desktop/rms-project/rms-frontend/src/components/pages/Login.js"],"names":["React","Component","Redirect","axiosInstance","Login","constructor","props","submitForm","e","preventDefault","user_info","username","state","password","post","then","response","data","console","log","localStorage","setItem","JSON","stringify","setState","loggedIn","alert","catch","err","message","non_field_errors","token","getItem","onInputChange","bind","target","name","value","render","error","fontsize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom'\n// import axios from 'axios';\nimport axiosInstance from '../../intercept.js'\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n\n        const token = localStorage.getItem(\"token\")\n\n        let loggedIn = true\n        if (token === null) {\n            loggedIn = false\n        }\n\n        this.state = {\n            username: '',\n            password: '',\n            message: '',\n            loggedIn\n        }\n        this.onInputChange = this.onInputChange.bind(this)\n        this.submitForm = this.submitForm.bind(this)\n    }\n\n    onInputChange(e) {\n        this.setState({\n            [e.target.name]: e.target.value\n        })\n        console.log(this.state);\n    }\n\n\n    submitForm = (e) => {\n        e.preventDefault()\n\n        const user_info = {\n            username: this.state.username,\n            password: this.state.password\n        };\n\n        // if(user_info){\n        //     localStorage.setItem(\"token\",\"julfikar\")\n        //     this.setState({\n        //             loggedIn:true\n        //         })\n        // }\n        // axios.post('http://workapis.pythonanywhere.com/api/login/', user_info)\n        // .then(res => {\n\n        //     localStorage.setItem(\"token\", JSON.stringify(res))\n        //     this.setState({\n        //                     loggedIn:true\n        //                 })\n        //             }\n        // );\n\n        // axios.post('http://workapis.pythonanywhere.com/api/login/', user_info)\n        // .then(resp => {\n        //     console.log('data',resp);\n        //     if(resp.length > 0){\n        //         localStorage.setItem(\"token\", JSON.stringify(resp))\n        //         this.setState({\n        //                 loggedIn:true\n        //         })\n        //     }else{\n        //         alert('Your username and password not match')\n        //     }\n        // } \n\n        //     // window.localStorage.setItem('token', res.data.data.token)\n        // );\n\n        axiosInstance.post('/login/', user_info).then(response => {\n\n            if(response.data != null){\n\n                console.log('76', response.data);\n                console.log('78', response.data);\n                localStorage.setItem(\"token\", JSON.stringify(response.data))\n                \n                this.setState({\n                    loggedIn: true,\n                   \n                })\n            } else {\n\n                alert(\"Empty data found\")\n            }\n            \n        })\n            .catch(err => {\n                // what now?\n                console.log(err);\n                this.setState({\n                    message:err.response.data.non_field_errors\n                })\n              \n            })\n\n    \n    }\n\n    render() {\n        if (this.state.loggedIn) {\n            return <Redirect to=\"/dashboard\" />\n        }\n\n        let error = ''\n\n        if (this.state.message) {\n            error = (\n                <div className=\"alert alert-danger\" style={{fontsize: '14px'}} role=\"alert\">\n            {this.state.message}\n             </div>\n           )    \n        }\n\n        return (\n            <div className=\"login-bg-color\">\n                <div className=\"container\">\n                    {/* Material form login */}\n                    <div className=\"login-area\">\n                        <div className=\"login-card\">\n                            {/*Card content*/}\n                            <div className=\"login-card-card-body\">\n                                <div className=\"logo-login\">RMS</div>\n                                {/* Form */}\n                                <h3>User Login:</h3>\n                                {error}\n                                <form className=\"text-center\" onSubmit={this.submitForm}>\n                                    <div className=\"form-group\">\n                                        <input type=\"text\" id=\"materialLoginFormEmail\" name=\"username\"\n                                            className=\"form-control\" placeholder=\" Enter your Username\"\n                                            value={this.state.username} onChange={this.onInputChange} />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <input type=\"password\" id=\"materialLoginFormPassword\" name=\"password\"\n                                            className=\"form-control\" placeholder=\"Enter Your Password\"\n                                            value={this.state.password} onChange={this.onInputChange} />\n                                        <a href=\"\" className=\"text-right float-right forgot\">Forgot password?</a>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <div className=\"checkbox checkbox-base\">\n                                            <input id={1} type=\"checkbox\" />\n                                            <label htmlFor={1}>\n                                                Remember Me\n              </label>\n                                        </div>\n                                    </div>\n                                    {/* Sign in button */}\n                                    <div className=\"white-text\">\n                                        <button className=\"btn btn-outline  btn-block my-4 \" type=\"submit\">\n                                            SIGN IN\n            </button>\n                                    </div>\n                                    {/* <button class=\"btn btn-outline-info btn-rounded btn-block my-4 waves-effect z-depth-0\" type=\"submit\">Sign in</button> */}\n                                    {/* Register */}\n                                    <p className=\"newuser\">Not a Member?\n            <a href=\"\">Register</a>\n                                    </p>\n                                    {/* Social login */}\n                                </form>\n                                {/* Form */}\n                            </div>\n                        </div>\n                    </div>\n                    {/* Material form login */}\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}